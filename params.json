{"name":"Alorm","tagline":"Android Lite ORM for SQLite","body":"### Alorm (Android Lite ORM)\r\n![Alorm](http://img15.hostingpics.net/thumbs/mini_276571alorm.jpg)\r\n\r\n***\r\nIn mobile development with the Android platform, the interaction with the database proves the most difficult thing to maintain.\r\nIn addition, on the Android platform, the number of open source Framework in the service very limited and they usually do not cover all the features\r\nFrom here comes the idea of ​​creating a Framework which will aim to cover all conventional operations such as creating tables, the backup, update and deletion.\r\nThe Framework (ALORM) guarantee the creation of tables respecting the integrity constraints from the annotated classes.\r\nThe Framework also provides an interface simplifies writing conventional operations of data manipulation (CRUD). \r\n\r\n## 1. Introduction\r\n\r\nAlorm is an open source framework for managing persistent objects in a relational database on the Android platform, to work with ALORM, the first thing to do is download the latest release from here: https://github.com/elmehdikarami/alorm/releases\r\n\r\nThen it must be integrated into the \"Build Path\" from your Android application, this can be done by two methods: \r\n\r\n         1. The first is to add the jar to the 'libs' directory. \r\n         2. The second is to add the jar directly in the build path by following the steps below (case of Eclipse) : \r\n            * Right click on your project \r\n            * Select Build Path> Configure Build Path \r\n            * Click Add External Jars and browse to the jar, and then click OK.\r\n\r\n## 2. Configuring DataBase\r\n\r\nTo specify to Alorm all informations about the database (name, type, version: in the case of SQLite), create a configuration file named 'alorm.properties' in the root folder 'assets'. Here's an example of 'alorm.properties': \r\n```\r\ndbName=db.sqlite                        #(database name)\r\ndbType=sqlite                           #(database type)\r\ndbVersion=1                             #(database version)\r\n```\r\n\r\n## 3. First application with Alorm\r\n\r\nAfter creating an Android project (or use an existing project), integrate and create Alorm alorm.properties file defining the parameters of your database, we will see how to define classes of models. Before starting the examples, the table below includes the annotations provided by the Framework and what they were build for :\r\n\r\n\r\n<table>\r\n  <tr>\r\n    <th>Annotation</th>\r\n    <th>Attribute</th>\r\n    <th>Default</th>\r\n    <th>Explanation</th>\r\n  </tr>\r\n  <tr>\r\n    <td>Entity</td>\r\n    <td>table</td>\r\n    <td>Class's name</td>\r\n    <td> Name of the table</td>\r\n  </tr>\r\n  <tr>\r\n    <td rowspan=\"8\">Collumn</td>\r\n    <td>name</td>\r\n    <td>attribute's name</td>\r\n    <td>Specify the column's name</td>\r\n  </tr>\r\n  <tr>\r\n    <td>primarykey</td>\r\n    <td>false</td>\r\n    <td>Sets the primary key constraint on a field</td>\r\n  </tr>\r\n  <tr>\r\n    <td>autoincrement</td>\r\n    <td>false</td>\r\n    <td>Defines the constraint auto_increment on a field</td>\r\n  </tr>\r\n  <tr>\r\n    <td>notnull</td>\r\n    <td>false</td>\r\n    <td>Sets the constraint 'Not Null' on a field</td>\r\n  </tr>\r\n  <tr>\r\n    <td>default</td>\r\n    <td>NULL</td>\r\n    <td>Specify a default value to a field</td>\r\n  </tr>\r\n  <tr>\r\n    <td>attribute_ref</td>\r\n    <td>NULL</td>\r\n    <td>Indicates which list an object belongs</td>\r\n  </tr>\r\n  <tr>\r\n    <td>oncascade</td>\r\n    <td>false</td>\r\n    <td>Set the action to perform</td>\r\n  </tr>\r\n    <tr>\r\n    <td>lazy</td>\r\n    <td>true</td>\r\n    <td>activate or not the lazy loading</td>\r\n  </tr>\r\n</table>\r\n\r\n## 4. Examples\r\n**Main rule: Each entity must have a default constructor and an ID, and each attribute must have a getter and setter.**\r\n\r\n**The database schema is created automatically using the reflection.**\r\n\r\nThese examples show how to use Alorm in several use cases ! \r\n### Example 1 : \r\nFirst define our Car class: \r\n```java\r\n@Entity(table = \"carTable\") //Indicate that it is an entity + table name\r\npublic class Car {\r\n        @Column(primarykey = true)  //Define a primary key\r\n        private Integer number;\r\n        private int modele;\r\n        private String company;\r\n        // getters & setters\r\n```\r\nTo interact with the database, just get the Session and call the appropriate methods. Here's an example for saving a car: \r\n```java\r\n        Car car = new Car ();\r\n        car.setNumber(\"8754\");\r\n        car.setCompany(\"Alorm\");\r\n        car.setModele(2014);\r\n        try{\r\n        // context references the current Activity\r\n         Session session = SessionFactory.getSession(context);//get the session using the factory\r\n          session.open();                                    // open the connection\r\n          session.beginTransaction(); //begin a transaction\r\n          session.save(car); //save the entity\r\n          session.commit();//commit\r\n          session.close(); //close the connection\r\n        }catch(AlormException e){  \r\n          session.rollBack();   \r\n                }\r\n```\r\nFor other methods, here are some examples of how to use them in a transaction: modify an object: \r\n```java\r\n   car.setCompany(\"Mercedes\");\r\n   session.update(car);\r\n```\r\nDelete an object : \r\n```java\r\nsession.deleteByPK(Car.class,\"8754\");\r\n```\r\nFind an object using its primary key: \r\n```java\r\nCar car = session.findByPK(Car.class, \"8754\");\r\n```\r\nGet a list: Return all registered objects : \r\n```java\r\nList<Car> carList = session.getAll(Car.class) ;\r\n```\r\nTo add one or more conditions to the selection, simply proceed as follows: \r\n```java\r\nList<Car> carList = session.getAll(Car.class, \"company = ? and modele = ?\", \"Mercedes\",2014) ;\r\n```\r\n### Example 2 : Relation One-to-One\r\nIn this example we see the relationship 1-1 (bidirectional and unidirectional): Each person has a car, and each car belongs to one person \r\n```java\r\n@Entity\r\npublic class Car {\r\n        @Column(primarykey = true)\r\n        private Integer number;\r\n        private int modele;\r\n        private String company;\r\n        @Column(onCascade = true)\r\n        private Person person;\r\n        // getters & setters\r\n}\r\n```\r\n```java\r\n@Entity\r\npublic class Person {\r\n        @Column(primarykey = true)\r\n        private Integer id;\r\n        private String firstName;\r\n        private String lastName;\r\n        private Car car;\r\n        //getters & setters\r\n}\r\n```\r\n<b>In this case we have a bidirectional relationship, to make it unidictional, simply remove the arrribute person or car.</b>\r\n* Cascade : Allows you to add, modify and delete object(Collection) in cascade, just add the (onCascade = true) annotation on the attribute (Collection) desired. \r\n\r\n### Example 3 : Ralation One-to-Many :\r\nContinuing the previous example, and assume that a person can have several cars. So just replace the attribute\r\n```java\r\n    private Car car;\r\n```\r\n    By\r\n```java\r\n    private List<Car> cars;\r\n```\r\n<b>Lazy Loading</b> : To disable the lazy loading on an attribute (object/collection) just proceed as below : \r\n```java\r\n@Column(lazy = false)\r\nprivate List<Car> cars\r\n```\r\n<b>Several lists</b> : One of the cases that may be possible is to have two or more collections of the same class : <br/>\r\n<b>1. Unidirectional : </b>\r\n```java\r\n@Entity\r\npublic class Person{\r\n  @Column(primarykey = true)\r\n  private Integer id;\r\n  private String firstName;\r\n  private String lastName;\r\n  private List<Car> forSale\r\n  private List<Car> forRent;\r\n//getters & setters\r\n}\r\n```\r\n<b>2. Bidirectional : </b> To make it bidirectional, just add the annotation @Column(attribut_ref = \"forSale\") to the attribute \r\n```java\r\n@Entity\r\npublic class Car {\r\n...\r\n  @Column(attribute_ref=\"forSale\")\r\n  private Person person;\r\n        // getters & setters\r\n}\r\n```\r\n<b>This solution can also cover the case of multiple objects</b>\r\n### Example 4 : Relation Many-to-Many :<br/>\r\nContinuing the previous example, suppose that each person can have one or more cars, and each car belongs to one or more persons in this case each class must have a collection of the other class. \r\n```java\r\n@Entity\r\npublic class Car {\r\n  private List<Person> persones\r\n// getters & setters + attributs\r\n}\r\n```\r\n```java\r\n@Entity\r\npublic class Person {\r\n  private List<Car> cars;\r\n//getters & setters + attributs\r\n}\r\n```\r\n### Example 5 : Inheritance : <br/>\r\nAlorm support also the notion of inheritance. Each class has its own table, so that the specific attributes of the subclass can have the Not Null constraint \r\n```java\r\n@Entity\r\npublic class Person {\r\n  @Column(primarykey = true)\r\n  private Integer idP;\r\n// getters & setters\r\n}\r\n\r\n\r\n@Entity\r\npublic class Student extends Person \r\n  @Column(primarykey = true)\r\n  private Integer idE;\r\n  private String name;\r\n// getters & setters + attributs\r\n}\r\n```\r\n### Example 6 : Custom queries : <br/>\r\nAlorm allows the developers to run custom queries, leaving to the developer the possibiliy to execute native SQL query : \r\n```java\r\nCursor cursor =  session.querySql(String \"select * from Car where modele = ?\",\"2014\"); // You can add conditions as much as you want\r\nsession.execSql(\"delete from Car where modele = 2014\");\r\n```\r\n\r\n### Example 7 : AlormTemplate : <br/>\r\nThis concept comes to simplify the use of the session, for example if you want to do a single operation (add, modify, delete), then you must open a session, start a transaction, commit and close the session.<br/>\r\nTo avoid this repetition we thought to introduce the notion of template \r\n```java\r\nAlormTemplate template = AlormTemplate.getTemplate(conext) ;\r\ntemplate.save(car); //After calling save, the car object is already saved !\r\n```\r\n","google":"UA-42570165-2","note":"Don't delete this file! It's used internally to help with page regeneration."}